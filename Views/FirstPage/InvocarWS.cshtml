
@model app.Models.Provider;
@{
    ViewBag.Title = "Evoke existing Web Service";
    <!-- var entidades = ViewBag.Entidades; -->
    //Layout = "~/Views/Shared/_Layout.cshtml";
    Layout = "";
    <!-- var valueEntidade = " ";
    var test = ""; -->
}

<!DOCTYPE html>

<html>
<head>
<h2>@ViewBag.Title</h2>
</head>
<body>
  <div class="row">
    <form asp-action="InvocarWS" asp-controller="FirstPage" method="post">
      <div class="form-group row">

        <label class="control-label">URL: </label>
        <input asp-for="url" placeholder="Web Service URL here"/>

        <label class="control-label">Entity: </label>
        <select asp-for="selected_table_name" asp-items="@new SelectList(Model.table_names)">
          <option value = null>--Select Entity--</option>
        </select> 
      </div>

      <div class="form-group">
        <input type="submit" value="Mapping" name="map" id="map">
      </div>
      

      <div class="form-group row">
      @if ((@Model.selected_table_name != null) && (@Model.url != null) && (@Model.validResponse == true))
      {
        var idColumn = 0;
        <!-- <h1>Resposta @Model.validateResponse</h1> --> //validacao json/xml
        <!-- <p>@Model.dataWs</p> -->
        <p>@ViewBag.teste</p>
        @if(@Model.isJson) //entra se a resposta for formato json
        {
          @foreach (var item in @Model.fieldsJson)
          {
            <label class="control-label">@item ------------> </label>
            <select asp-for="columnsDB" asp-items="@new SelectList(Model.columns)">
              <option value = null>--Select Column--</option>
            </select>
            <br/>
          }
        }
        else if(@Model.isXml)
        {
          <p>to aqui</p>
        }
      }
      else
      {
        <h2>@Model.validateResponse</h2>
      }
    </div>
    
    @if(@Model.mapButton)
    {
    <div>
      <input type="submit" value="Result" name="Submit" id="result">
    </div>
    }
   
    @if(@Model.submitButton)
    {
      @if(@Model.counterRow > 1){
        <p>@Model.counterRow rows affected</p>
      }
      else
      {
        <p>@Model.counterRow row affected</p>
      }
     
    }

    </form>
    
  </div>

</body>

<!-- <span id="msg" style="color:red;"/>   
@section Scripts
{
  <script type="text/javascript">  
    $('#mapa').click(function () {  
        var form = $("#testForm") 
        var url_ = form.attr("action"); 
        var formData = form.serialize();  
        $.post(url, formData, function (data) {  
            $("#msg").html(data);  
        });  
    })  
</script> 
} -->
 
  <!-- <script src="~wwwroot/lib/jquery/dist/jquery.min.js"></script>
  <script type="text/javascript"> -->
  

  <!-- </script> -->
